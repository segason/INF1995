#include <avr/io.h>
#define F_CPU 8000000
#include <util/delay.h>
#include "PWM.h"


Pwm::Pwm()
{
		TCCR1A |= (1<<COM1A1) | (1<<COM1B1) | (1<<WGM10); 
    
		TCNT1 = 0;

		OCR1A = 0 ;

		OCR1B = 0 ;

		TCCR1B |= (1<<CS11) ;

		TCCR1C = 0;
}

Pwm::~Pwm()
{}

void Pwm::Avance(unsigned int pwm)
{
	PORTD = 0x00;
	OCR1A = pwm * 1.05;
	OCR1B = pwm;

}

void Pwm::reculer(unsigned int pwm)
{
	PORTD = 0xc0;
	OCR1A = OCR1B = pwm;

}

void Pwm::Tourner_Gauche(unsigned int pwm)
{
    PORTD = 0x00;
	OCR1A = pwm * 1.05 / 1.5;
	OCR1B = pwm;
}

void Pwm::Tourner_GaucheInt(unsigned int pwm)
{
	PORTD = 0x00;
	OCR1A = pwm * 1.05 / 2;
	OCR1B = pwm;
}


void Pwm::Tourner_Droite(unsigned int pwm)
{
    PORTD = 0x00;
	OCR1A = pwm * 1.05;
	OCR1B = pwm / 1.5;
}

void Pwm::Tourner_DroiteInt(unsigned int pwm)
{
	PORTD = 0x00;
	OCR1A = pwm * 1.05;
	OCR1B = pwm / 2;
}

void Pwm::pivotDroit(unsigned int pwm)
{
	PORTD = 0x40;
    OCR1A = pwm * 1.05;
    OCR1B = pwm;
}

void Pwm::pivotGauche(unsigned int pwm)
{
	PORTD = 0x80;
    OCR1A = pwm * 1.05;
    OCR1B = pwm;
}


